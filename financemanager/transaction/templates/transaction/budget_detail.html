{% extends 'base.html' %}
{% load i18n %}

{% block title %}
    {% blocktrans %}Budget: {{ budget.name }}{% endblocktrans %}
{% endblock %}

{% block body %}
    <h2>{{ budget.name }}</h2>
    <p><strong>{% trans "Period" %}:</strong> {{ budget.start_date }} â€” {{ budget.end_date }}</p>
    <p><strong>{% trans "Total Expense Limit" %}:</strong> {{ budget.total_expense_limit }}</p>
    <p><strong>{% trans "Spent" %}:</strong> {{ spent_amount }}</p>
    <p><strong>{% trans "Income" %}:</strong> {{ income_amount }}</p>
    <p><strong>{% trans "Remaining" %}:</strong> {{ remaining_budget }}</p>

    <h3>{% trans "Category Limits" %}</h3>
    {% if category_progress %}
        <ul>
        {% for item in category_progress %}
            <li>
                <strong>{{ item.limit.category.translated_name }}:</strong>
                {% trans "limit" %} {{ item.limit.limit_amount }},
                {% trans "spent" %} {{ item.spent }},
                {% trans "remaining" %} {{ item.remaining }},
                {% if item.over_budget %}<span style="color:red;">{% trans "Over limit!" %}</span>{% endif %}
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>{% trans "No category limits set." %}</p>
    {% endif %}

    <h3>{% trans "Transactions in Budget Period" %}</h3>
    {% if transactions %}
        <ul>
            {% for t in transactions %}
            <li>
                {{ t.date }} |
                {{ t.category.translated_name|default:_("No Category") }} |
                {{ t.amount }} |
                {{ t.type }} |
                {{ t.description }}
            </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>{% trans "No transactions in the budget period." %}</p>
    {% endif %}

    <a href="{% url 'transaction:budget-list' %}" class="btn btn-secondary">{% trans "Back to List" %}</a>
{% endblock %}
